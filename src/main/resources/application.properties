spring.application.name=gg-stats
spring.profiles.active=dev

spring.datasource.url=jdbc:postgresql://localhost:5432/dota_stats
spring.datasource.username=myuser
spring.datasource.password=secret

spring.sql.init.mode=always
spring.batch.jdbc.initialize-schema=never

# Default user for development
spring.security.user.name=admin
spring.security.user.password=admin

spring.threads.virtual.enabled=true

# OpenDota API Rate Limiting - Matches OpenDota's actual limits
opendota.api.base-url=https://api.opendota.com/api
opendota.api.rate-limit.per-minute=60
opendota.api.rate-limit.per-day=2000
opendota.api.rate-limit.burst-capacity=60
opendota.api.refill-interval.milliseconds=60000
opendota.api.rate-limit.enable-waiting=true

# OpenDota API Timeouts and Circuit Breaker - Faster response to rate limiting
circuit-breaker.failure-threshold=20
circuit-breaker.success-threshold=3
circuit-breaker.timeout-duration-ms=30000
circuit-breaker.minimum-calls=5
circuit-breaker.sliding-window-size=100

# Batch Processing Configuration
app.batch.heroes.chunk-size=60
app.batch.heroes.retry-limit=3
app.batch.heroes.skip-limit=10

# Player Batch Configuration - Chunked Processing
app.batch.players.chunk-size=60
app.batch.players.retry-limit=3
app.batch.players.skip-limit=10
app.batch.players.max-memory-usage=100
app.batch.players.api-delay-ms=1000

app.batch.teams.chunk-size=60
app.batch.teams.retry-limit=3
app.batch.teams.skip-limit=10

app.batch.notable-players.chunk-size=60
app.batch.notable-players.retry-limit=3
app.batch.notable-players.skip-limit=10

app.batch.hero-rankings.chunk-size=60
app.batch.hero-rankings.retry-limit=3
app.batch.hero-rankings.skip-limit=10

app.batch.expiration.heroes=1h
app.batch.expiration.teams=7d
app.batch.expiration.notableplayers=7d
app.batch.expiration.herorankings=1h
app.batch.expiration.players=1h
app.batch.expiration.default=1h

spring.batch.job.enabled=false
spring.jpa.properties.hibernate.connection.isolation=2  # READ_COMMITTED